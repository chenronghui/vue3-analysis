### 为什么静态语言比动态语言性能好

::: tip
静态类型语言：在编译阶段确定所有变量的类型。<br>
动态类型语言：在执行阶段确定所有变量的类型。<br>
在执行阶段确定变量类型是需要 cpu 计算的，这也是性能差的一个点
:::

用一个例子来说明:

```js
class C {
    constructor(x, y) {
        this.x = x;
        this.y = y;
    }
}

function add(a) {
    return a.x + a.y;
}

var c1 = new C(10, 20);
var c2 = new C('hello', 'world');

console.log(add(c1));  // 30
console.log(add(c2));  // helloworld
```
定义一个类C，并为它添加了两个属性x和y，然后定义了一个add函数，用来把一个实例的所有属性相加。当JS编译器看到这段代码时，它完全不知道add函数里的参数a的类型是什么，只有执行的时候才知道。最终c1是数字相加，c2是字符串拼接。
同样的代码，用c++实现

```c
class C {
    public;
        int x;
        int y;
}

int add(C a) {
    return a.x + a.y;
}
```

在编译的时候，就知道C里面的属性x和y的类型是整型了。
从内存分配的角度来看上面的例子，c++由于一开始就定义好了属性类型是整型，所以假设x是基地址，那么y就在基地址+4的位置上。js则不同，由于一开始不知道属性类型，所以也不知道每个属性要占多少地址空间，所以需要额外的空间存储属性名，在程序运行时，再动态计算属性的地址偏移量。
由此看来，动态类型语言在空间占用上会有一些损耗。

#### 参考
1. [强类型、弱类型、静态类型、动态类型语言](https://juejin.cn/post/6844903933463232519)
